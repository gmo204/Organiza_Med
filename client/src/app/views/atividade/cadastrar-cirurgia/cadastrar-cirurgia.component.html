<main class="container my-4">
  <div class="col col-lg-8 col-xxl-6">
    <h1 class="fs-2">Cadastro de Cirurgia</h1>
    <hr />

    <form [formGroup]="atividadeForm" (ngSubmit)="cadastrar()">

      <mat-form-field class="w-100 mt-3" appearance="fill">
        <mat-label>Data</mat-label>
        <input
          matInput
          data-cy="data"
          formControlName="data"
          type="date"
          aria-label="Data do Compromisso"
        />
        <mat-icon matSuffix color="primary">calendar_today</mat-icon>
      </mat-form-field>

      <mat-form-field class="w-100 mt-3" appearance="fill">
        <mat-label>Hora de Início</mat-label>
        <input
          matInput
          data-cy="horaInicio"
          formControlName="horaInicio"
          type="time"
          placeholder="18:00"
        />
        <mat-icon matSuffix color="primary">schedule</mat-icon>
        <mat-error class="text-white" *ngIf="horaInicio?.invalid">
          A hora de início precisa ser preenchida.
        </mat-error>
      </mat-form-field>

      <mat-form-field class="w-100 mt-3" appearance="fill">
        <mat-label>Hora de Término</mat-label>
        <input
          matInput
          data-cy="horaTermino"
          formControlName="horaTermino"
          type="time"
          placeholder="21:00"
        />
        <mat-icon matSuffix color="primary">schedule</mat-icon>
        <mat-error class="text-white" *ngIf="horaFim?.invalid">
          A hora de término precisa ser preenchida.
        </mat-error>
      </mat-form-field>

      <mat-form-field class="w-100 mt-3" appearance="fill">
        <mat-label>Médicos</mat-label>
        <mat-select formControlName="medicoId" multiple>
          <mat-option *ngFor="let medico of medicos" [value]="medico.id">
            {{ medico.nome }}
          </mat-option>
        </mat-select>
        <mat-icon matSuffix color="primary">stethoscope</mat-icon>
        <mat-error *ngIf="medicoId?.invalid">Os médicos são obrigatórios</mat-error>
      </mat-form-field>

      <!-- <section>
        <h3>Equipe de Medicos</h3>

        <mat-form-field class="w-100 mt-3" appearance="fill">
          <mat-label>Medico</mat-label>
          <mat-select formControlName="medicoId">
            <mat-option
              *ngFor="let medico of medicos"
              [value]="medico.id"
              >{{ medico.nome }}</mat-option
            >
          </mat-select>
          <mat-icon matSuffix color="primary">stethoscope</mat-icon>
        </mat-form-field>

        <button
          mat-stroked-button
          data-cy="adicionarMedico"
          extended
          (click)="adicionarMedico(medicoId?.value);"
          type="button"
          class="d-flex ms-auto"
        >
          <mat-icon>add_circle</mat-icon>
          Adicionar Medico
        </button>

        <div class="row g-2 mt-4">
          <mat-card
            appearance="outlined"
            *ngFor="let medico of medicos; index as i"
          >
            <mat-card-content class="d-flex align-items-center">
              <p class="fs-5 m-0">{{ medico.nome }}</p>

              <div class="ms-auto">
                <button
                  mat-mini-fab
                  data-cy="removerMedico"
                  (click)="removerMedico(i)"
                  type="button"
                  matTooltip="Remover medico"
                >
                  <mat-icon>cancel</mat-icon>
                </button>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </section> -->

      <div class="row justify-content-end g-2 mt-5">
        <button type="submit" mat-flat-button color="primary" class="col-sm-4 col-md-3">
          <mat-icon>check</mat-icon>
          Confirmar
        </button>
        <a mat-stroked-button class="col-sm-4 col-md-3" routerLink="/atividades">
          <mat-icon>keyboard_return</mat-icon>
          Voltar
        </a>
      </div>
    </form>
  </div>
</main>
